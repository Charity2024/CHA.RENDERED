<!DOCTYPE html>
<html lang="en" data-mode="space-nerd">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CELESTIA™ | Personal Universe</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;1,400&family=Inter:wght@300;500&family=JetBrains+Mono&display=swap');

        :root {
            --bg: #05070a;
            --star-color: #e2e8f0;
            --accent: #94a3b8;
            --font: 'Inter', sans-serif;
            --ui-opacity: 0.6;
            --line-opacity: 0.2;
            --panel-bg: rgba(10, 15, 25, 0.9);
            --ease: cubic-bezier(0.2, 0, 0.2, 1);
        }

        [data-mode="engineer"] {
            --bg: #0a0a0a; --star-color: #00ff41; --accent: #00ff41;
            --font: 'JetBrains Mono', monospace; --line-opacity: 0.1;
        }

        [data-mode="creative"] {
            --bg: #0c0812; --star-color: #ff00ea; --accent: #7dd3fc;
            --font: 'Inter', sans-serif; --line-opacity: 0.4;
        }

        [data-mode="academia"] {
            --bg: #f5f2ed; --star-color: #2d241e; --accent: #5c4033;
            --font: 'EB Garamond', serif; --line-opacity: 0.3;
            --panel-bg: rgba(255, 255, 255, 0.95);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body, html {
            width: 100%; height: 100%; overflow: hidden;
            background-color: var(--bg); color: var(--star-color);
            font-family: var(--font); transition: background-color 2.5s var(--ease);
        }

        /* --- UI OVERLAYS --- */
        .overlay {
            position: fixed; inset: 0; pointer-events: none; z-index: 10;
            padding: 20px; display: flex; flex-direction: column; justify-content: space-between;
        }

        @media (min-width: 768px) { .overlay { padding: 40px; } }

        .mode-switcher {
            pointer-events: all; display: flex; gap: 15px; flex-wrap: wrap;
            mix-blend-mode: difference;
        }

        .mode-btn {
            cursor: pointer; font-size: 0.6rem; letter-spacing: 0.2em;
            text-transform: uppercase; opacity: 0.4; transition: 0.5s;
        }

        .mode-btn.active { opacity: 1; font-weight: bold; }

        /* --- THE UNIVERSE --- */
        #universe-container {
            position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
        }

        svg {
            width: 100%; height: 100%; overflow: visible; touch-action: none;
        }

        .star-circle {
            fill: var(--star-color); filter: drop-shadow(0 0 5px var(--accent));
            cursor: pointer; pointer-events: all;
        }

        .connection-line {
            stroke: var(--star-color); stroke-width: 0.5;
            opacity: var(--line-opacity); transition: opacity 2s;
        }

        /* --- SLIDE PANEL --- */
        #panel {
            position: fixed; right: 0; top: 0; bottom: 0;
            width: 100%; max-width: 400px; padding: 40px;
            background: var(--panel-bg); backdrop-filter: blur(20px);
            z-index: 20; transform: translateX(100%);
            transition: transform 0.8s var(--ease);
            display: flex; flex-direction: column; justify-content: center;
        }

        #panel.visible { transform: translateX(0); }

        #panel h2 { font-size: 2rem; font-weight: 300; margin-bottom: 10px; }
        #panel p { font-size: 1rem; line-height: 1.8; opacity: 0.8; }

        .close-btn {
            position: absolute; top: 30px; right: 30px; cursor: pointer;
            font-size: 0.7rem; letter-spacing: 0.2em; border: 1px solid var(--accent);
            padding: 5px 10px; pointer-events: all;
        }

        /* --- FOOTER --- */
        footer {
            font-size: 0.6rem; letter-spacing: 0.3em; opacity: 0.4;
            display: flex; justify-content: space-between; align-items: center;
            mix-blend-mode: difference;
        }

        .footer-tagline::after {
            content: attr(data-content);
        }
    </style>
</head>
<body>

    <div class="overlay">
        <header>
            <div style="font-size: 0.6rem; letter-spacing: 0.5em; opacity: 0.5;">ASTRUM_SYSCFG // 2026</div>
        </header>

        <nav class="mode-switcher">
            <div class="mode-btn active" onclick="setMode('space-nerd', this)">Space</div>
            <div class="mode-btn" onclick="setMode('engineer', this)">Engineer</div>
            <div class="mode-btn" onclick="setMode('creative', this)">Creative</div>
            <div class="mode-btn" onclick="setMode('academia', this)">Academia</div>
        </nav>

        <footer>
            <div>EST. COORDINATES: <span id="mouse-coords">000,000</span></div>
            <div class="footer-tagline" id="footer-text"></div>
            <div>© CELESTIA</div>
        </footer>
    </div>

    <div id="panel">
        <div class="close-btn" onclick="closePanel()">ESC // CLOSE</div>
        <h2 id="p-title">Project Name</h2>
        <div id="p-meta" style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 20px;">CATEGORY_NULL</div>
        <p id="p-desc">Project details loading...</p>
    </div>

    <div id="universe-container">
        <svg id="universe" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet">
            <g id="lines-group"></g>
            <g id="stars-group"></g>
        </svg>
    </div>

    <script>
        const PROJECTS = [
            { id: 1, title: "Neural Shell", cat: "AI_SYSTEMS",
              pos: { "space-nerd": [30, 30], engineer: [20, 20], creative: [10, 80], academia: [50, 20] },
              desc: {
                "space-nerd": "A star cluster of decentralized thought, drifting in the digital void.",
                engineer: "High-performance interface for neural network visualization. Optimized for low-latency feedback.",
                creative: "Where the ghosts of code find a home in the symmetry of light.",
                academia: "An exploration into the phenomenology of artificial presence."
              }
            },
            { id: 2, title: "Flux Ledger", cat: "BLOCKCHAIN",
              pos: { "space-nerd": [70, 45], engineer: [20, 50], creative: [80, 20], academia: [50, 50] },
              desc: {
                "space-nerd": "Mapping the migration of wealth across the event horizon.",
                engineer: "Distributed ledger system utilizing immutable state containers and cryptographic proofing.",
                creative: "Tracing the golden thread of value through a tapestry of chaos.",
                academia: "A treatise on the historical evolution of currency into energy."
              }
            },
            { id: 3, title: "Aether Engine", cat: "WEBGL_RENDER",
              pos: { "space-nerd": [50, 80], engineer: [20, 80], creative: [40, 50], academia: [50, 80] },
              desc: {
                "space-nerd": "Illuminating the dark matter between the pixels.",
                engineer: "WebGL-based rendering pipeline with custom GLSL shaders and real-time vertex displacement.",
                creative: "Sculpting photons like clay in a room without walls.",
                academia: "The aesthetics of light: simulating the sun inside a box of silicon."
              }
            }
        ];

        const footerNotes = {
            "space-nerd": "DRIFTING THROUGH THE MULTIVERSE",
            "engineer": "STABLE BUILD // NO ERRORS FOUND",
            "creative": "POETRY IN MOTION",
            "academia": "THE UNIVERSE AS A TEXT"
        };

        let currentMode = 'space-nerd';
        const starsG = document.getElementById('stars-group');
        const linesG = document.getElementById('lines-group');
        const universe = document.getElementById('universe');

        function init() {
            PROJECTS.forEach((p, i) => {
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.classList.add("star-node");
                
                const c = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                c.setAttribute("r", "1.2%"); // Scalable radius
                c.classList.add("star-circle");
                
                const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
                t.textContent = p.title;
                t.setAttribute("dx", "20");
                t.setAttribute("dy", "5");
                t.setAttribute("style", "font-size: 12px; fill: currentColor; opacity: 0; transition: opacity 0.5s; pointer-events: none;");

                g.appendChild(c);
                g.appendChild(t);
                starsG.appendChild(g);

                g.addEventListener('mouseenter', () => { gsap.to(c, { r: "2%", duration: 0.3 }); t.style.opacity = 0.8; });
                g.addEventListener('mouseleave', () => { gsap.to(c, { r: "1.2%", duration: 0.3 }); t.style.opacity = 0; });
                g.addEventListener('click', (e) => { e.stopPropagation(); openPanel(p); });
            });

            createLines();
            setMode('space-nerd', document.querySelector('.mode-btn'));
            setupInteractions();
        }

        function createLines() {
            linesG.innerHTML = '';
            for(let i=0; i < PROJECTS.length; i++) {
                for(let j=i+1; j < PROJECTS.length; j++) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.classList.add("connection-line");
                    linesG.appendChild(l);
                }
            }
        }

        function setMode(mode, btn) {
            currentMode = mode;
            document.documentElement.setAttribute('data-mode', mode);
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('footer-text').innerText = footerNotes[mode];

            PROJECTS.forEach((p, i) => {
                // Map percentages to 1000x1000 coordinate system
                const targetX = p.pos[mode][0] * 10;
                const targetY = p.pos[mode][1] * 10;
                const node = starsG.children[i];

                gsap.to(node.querySelector('circle'), { attr: { cx: targetX, cy: targetY }, duration: 2, ease: "expo.inOut", delay: i * 0.05 });
                gsap.to(node.querySelector('text'), { attr: { x: targetX, y: targetY }, duration: 2, ease: "expo.inOut", delay: i * 0.05 });
            });

            updateLines();
            closePanel();
        }

        function updateLines() {
            const lines = linesG.children;
            let count = 0;
            PROJECTS.forEach((p1, i) => {
                PROJECTS.forEach((p2, j) => {
                    if (j > i) {
                        const l = lines[count++];
                        const start = [p1.pos[currentMode][0] * 10, p1.pos[currentMode][1] * 10];
                        const end = [p2.pos[currentMode][0] * 10, p2.pos[currentMode][1] * 10];
                        gsap.to(l, { attr: { x1: start[0], y1: start[1], x2: end[0], y2: end[1] }, duration: 2, ease: "expo.inOut" });
                    }
                });
            });
        }

        function openPanel(p) {
            document.getElementById('p-title').textContent = p.title;
            document.getElementById('p-meta').textContent = `// NODE_${p.cat}`;
            document.getElementById('p-desc').textContent = p.desc[currentMode];
            document.getElementById('panel').classList.add('visible');
        }

        function closePanel() { document.getElementById('panel').classList.remove('visible'); }

        function setupInteractions() {
            window.addEventListener('mousemove', (e) => {
                const x = (e.clientX / window.innerWidth - 0.5) * 40;
                const y = (e.clientY / window.innerHeight - 0.5) * 40;
                gsap.to(universe, { x: x, y: y, duration: 2, ease: "power2.out" });
                document.getElementById('mouse-coords').innerText = `${Math.floor(e.clientX)},${Math.floor(e.clientY)}`;
            });
            // Close panel on clicking empty universe
            universe.addEventListener('click', closePanel);
        }

        init();
    </script>
</body>
</html>